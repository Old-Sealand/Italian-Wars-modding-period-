#When adding effects directly in on_actions always consider if it would be best to do so through a scripted effect. on_actions with a lot of script in them are harder to get an overview of.

# country

# Nation annexed.
# FROM is the nation being annexed
on_annexed = {
	FROM = {
		every_subject_country = {
			limit = { is_subject_of_type = IW_league_member }
		}
		grant_independence = yes
	}
}

# # ROOT = Overlord, FROM = Minor
# on_dependency_gained = {
# }

on_hre_dismantled = {
	set_global_flag = IW_HRE_dismantled
}

# country
# root = winning country, from = loser country
on_war_won = {
	if = {
		limit = { FROM = { tag = event_target:IW_third_party } }
		clear_global_event_target = IW_third_party
	}
	else_if = {
		limit = { ROOT = { tag = event_target:IW_third_party } }
		clear_global_event_target = IW_third_party
	}
	if = {
		limit = { 
			OR = {
				ROOT = { has_country_flag = iw_took_deal_nap }
				FROM = { has_country_flag = iw_took_deal_nap }
			}
			NOT = { event_target:IW_french_league_leader = { has_country_flag = iw_killed_nap } }
		}
		event_target:IW_french_league_leader = {
			country_event = { id = IW_flavor.5 }
		}
	}
}

# country
# root = winning country, from = location
on_siege_won_country = {
	if = {
		limit = {
			OR = {
				tag = event_target:IW_HRE_league_leader
				overlord = { tag = event_target:IW_HRE_league_leader }
			}
			FROM = {
				owner = {
					tag = PAP
					is_in_war = { casus_belli = IW_cb_italian_war }
				}
				province_id = 118
			}
		}
		country_event = { id = IW_flavor.2 }
	}
}